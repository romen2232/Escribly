import{z as ye,D as L,j as e,r as c,$ as je,E as Ne,G as Y,b as w,t as U,R as Ce,L as M,u as $,p as k,U as _,A as b,J as Ee,B as S,M as $e,_ as ke,w as Be,v as Fe,Q as H,c as Pe,n as Ae,N as Se}from"./index-b43e24a8.js";import{t as W,e as Re,f as Ue,g as K,h as Z,i as R,j as _e,u as ee,m as re,a as se,b as te,d as ae,l as Ie}from"./notes-f536ab52.js";var ze={default:"bg-default text-default-foreground",primary:"bg-primary text-primary-foreground",secondary:"bg-secondary text-secondary-foreground",success:"bg-success text-success-foreground",warning:"bg-warning text-warning-foreground",danger:"bg-danger text-danger-foreground",foreground:"bg-foreground text-background"},Le={default:"shadow-lg shadow-default/50 bg-default text-default-foreground",primary:"shadow-lg shadow-primary/40 bg-primary text-primary-foreground",secondary:"shadow-lg shadow-secondary/40 bg-secondary text-secondary-foreground",success:"shadow-lg shadow-success/40 bg-success text-success-foreground",warning:"shadow-lg shadow-warning/40 bg-warning text-warning-foreground",danger:"shadow-lg shadow-danger/40 bg-danger text-danger-foreground",foreground:"shadow-lg shadow-foreground/40 bg-foreground text-background"},Me={default:"bg-transparent border-default text-foreground",primary:"bg-transparent border-primary text-primary",secondary:"bg-transparent border-secondary text-secondary",success:"bg-transparent border-success text-success",warning:"bg-transparent border-warning text-warning",danger:"bg-transparent border-danger text-danger",foreground:"bg-transparent border-foreground text-foreground"},Oe={default:"bg-default/40 text-default-foreground",primary:"bg-primary/20 text-primary",secondary:"bg-secondary/20 text-secondary",success:"bg-success/20 text-success-600 dark:text-success",warning:"bg-warning/20 text-warning-600 dark:text-warning",danger:"bg-danger/20 text-danger dark:text-danger-500",foreground:"bg-foreground/10 text-foreground"},Ge={default:"border-default bg-default-100 text-default-foreground",primary:"border-default bg-default-100 text-primary",secondary:"border-default bg-default-100 text-secondary",success:"border-default bg-default-100 text-success",warning:"border-default bg-default-100 text-warning",danger:"border-default bg-default-100 text-danger",foreground:"border-default bg-default-100 text-foreground"},De={default:"bg-transparent text-default-foreground",primary:"bg-transparent text-primary",secondary:"bg-transparent text-secondary",success:"bg-transparent text-success",warning:"bg-transparent text-warning",danger:"bg-transparent text-danger",foreground:"bg-transparent text-foreground"},Ve={default:"border-default text-default-foreground hover:!bg-default",primary:"border-primary text-primary hover:!text-primary-foreground hover:!bg-primary",secondary:"border-secondary text-secondary hover:text-secondary-foreground hover:!bg-secondary",success:"border-success text-success hover:!text-success-foreground hover:!bg-success",warning:"border-warning text-warning hover:!text-warning-foreground hover:!bg-warning",danger:"border-danger text-danger hover:!text-danger-foreground hover:!bg-danger",foreground:"border-foreground text-foreground hover:!bg-foreground"},E={solid:ze,shadow:Le,bordered:Me,flat:Oe,faded:Ge,light:De,ghost:Ve},Te=W({slots:{base:["flex","relative","justify-center","items-center","box-border","overflow-hidden","align-middle","text-white","z-10",...ye],img:["flex","object-cover","w-full","h-full","transition-opacity","!duration-500","opacity-0","data-[loaded=true]:opacity-100"],fallback:[...L,"flex","items-center","justify-center"],name:[...L,"font-normal","text-center","text-inherit"],icon:[...L,"flex","items-center","justify-center","text-inherit","w-full","h-full"]},variants:{size:{sm:{base:"w-8 h-8 text-tiny"},md:{base:"w-10 h-10 text-tiny"},lg:{base:"w-14 h-14 text-small"}},color:{default:{base:E.solid.default},primary:{base:E.solid.primary},secondary:{base:E.solid.secondary},success:{base:E.solid.success},warning:{base:E.solid.warning},danger:{base:E.solid.danger}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},isBordered:{true:{base:"ring-2 ring-offset-2 ring-offset-background dark:ring-offset-background-dark"}},isDisabled:{true:{base:"opacity-disabled"}},isInGroup:{true:{base:["-ml-2 data-[hover=true]:-translate-x-3 transition-transform","data-[focus-visible=true]:-translate-x-3"]}},isInGridGroup:{true:{base:"m-0 data-[hover=true]:translate-x-0"}}},defaultVariants:{size:"md",color:"default",radius:"full"},compoundVariants:[{color:"default",isBordered:!0,class:{base:"ring-default"}},{color:"primary",isBordered:!0,class:{base:"ring-focus"}},{color:"secondary",isBordered:!0,class:{base:"ring-secondary"}},{color:"success",isBordered:!0,class:{base:"ring-success"}},{color:"warning",isBordered:!0,class:{base:"ring-warning"}},{color:"danger",isBordered:!0,class:{base:"ring-danger"}}]});W({base:"flex items-center justify-center h-auto w-max-content",variants:{isGrid:{true:"inline-grid grid-cols-4 gap-3"}}});var Je=r=>(r==null?void 0:r.length)<=4?r:r==null?void 0:r.slice(0,3),Ye=()=>e.jsxs("svg",{"aria-hidden":"true",fill:"none",height:"80%",role:"presentation",viewBox:"0 0 24 24",width:"80%",children:[e.jsx("path",{d:"M12 2C9.38 2 7.25 4.13 7.25 6.75C7.25 9.32 9.26 11.4 11.88 11.49C11.96 11.48 12.04 11.48 12.1 11.49C12.12 11.49 12.13 11.49 12.15 11.49C12.16 11.49 12.16 11.49 12.17 11.49C14.73 11.4 16.74 9.32 16.75 6.75C16.75 4.13 14.62 2 12 2Z",fill:"currentColor"}),e.jsx("path",{d:"M17.0809 14.1489C14.2909 12.2889 9.74094 12.2889 6.93094 14.1489C5.66094 14.9989 4.96094 16.1489 4.96094 17.3789C4.96094 18.6089 5.66094 19.7489 6.92094 20.5889C8.32094 21.5289 10.1609 21.9989 12.0009 21.9989C13.8409 21.9989 15.6809 21.5289 17.0809 20.5889C18.3409 19.7389 19.0409 18.5989 19.0409 17.3589C19.0309 16.1289 18.3409 14.9889 17.0809 14.1489Z",fill:"currentColor"})]}),[pr,He]=Re({name:"AvatarGroupContext",strict:!1});function Ke(r={}){const{loading:t,src:s,srcSet:l,onLoad:o,onError:d,crossOrigin:n,sizes:a,ignoreFallback:i}=r,[h,f]=c.useState("pending");c.useEffect(()=>{f(s?"loading":"pending")},[s]);const u=c.useRef(),p=c.useCallback(()=>{if(!s)return;x();const m=new Image;m.src=s,n&&(m.crossOrigin=n),l&&(m.srcset=l),a&&(m.sizes=a),t&&(m.loading=t),m.onload=v=>{x(),f("loaded"),o==null||o(v)},m.onerror=v=>{x(),f("failed"),d==null||d(v)},u.current=m},[s,n,l,a,o,d,t]),x=()=>{u.current&&(u.current.onload=null,u.current.onerror=null,u.current=null)};return Ue(()=>{if(!i)return h==="loading"&&p(),()=>{x()}},[h,p,i]),i?"loaded":h}function Ze(r={}){var t,s,l,o,d;const n=He(),a=!!n,{as:i,ref:h,src:f,name:u,icon:p,classNames:x,fallback:m,alt:v=u||"avatar",imgRef:j,color:y=(t=n==null?void 0:n.color)!=null?t:"default",radius:P=(s=n==null?void 0:n.radius)!=null?s:"full",size:B=(l=n==null?void 0:n.size)!=null?l:"md",isBordered:g=(o=n==null?void 0:n.isBordered)!=null?o:!1,isDisabled:N=(d=n==null?void 0:n.isDisabled)!=null?d:!1,isFocusable:O=!1,getInitials:le=Je,ignoreFallback:G=!1,showFallback:de=!1,ImgComponent:ie="img",imgProps:D,className:ce,onError:ue,...V}=r,ge=i||"span",fe=K(h),I=K(j),{isFocusVisible:xe,isFocused:he,focusProps:T}=je(),{isHovered:me,hoverProps:be}=Ne({isDisabled:N}),A=Ke({src:f,onError:ue,ignoreFallback:G})==="loaded",pe=(!f||!A)&&de,F=c.useMemo(()=>{var C;return Te({color:y,radius:P,size:B,isBordered:g,isDisabled:N,isInGroup:a,isInGridGroup:(C=n==null?void 0:n.isGrid)!=null?C:!1})},[y,P,B,g,N,a,n==null?void 0:n.isGrid]),J=Z(x==null?void 0:x.base,ce),z=c.useMemo(()=>O||i==="button",[O,i]),we=c.useCallback((C={})=>({ref:fe,tabIndex:z?0:-1,"data-hover":R(me),"data-focus":R(he),"data-focus-visible":R(xe),className:F.base({class:Z(J,C==null?void 0:C.className)}),...Y(V,be,z?T:{})}),[z,F,J,T,V]),ve=c.useCallback((C={})=>({ref:I,src:f,"data-loaded":R(A),className:F.img({class:x==null?void 0:x.img}),...Y(D,C)}),[F,A,D,f,I]);return{Component:ge,ImgComponent:ie,src:f,alt:v,icon:p,name:u,imgRef:I,slots:F,classNames:x,fallback:m,isImgLoaded:A,showFallback:pe,ignoreFallback:G,getInitials:le,getAvatarProps:we,getImageProps:ve}}var oe=_e((r,t)=>{const{Component:s,ImgComponent:l,src:o,icon:d=e.jsx(Ye,{}),alt:n,classNames:a,slots:i,name:h,showFallback:f,fallback:u,getInitials:p,getAvatarProps:x,getImageProps:m}=Ze({...r,ref:t}),v=c.useMemo(()=>!f&&o?null:u?e.jsx("div",{"aria-label":n,className:i.fallback({class:a==null?void 0:a.fallback}),role:"img",children:u}):h?e.jsx("span",{"aria-label":n,className:i.name({class:a==null?void 0:a.name}),role:"img",children:p(h)}):e.jsx("span",{"aria-label":n,className:i.icon({class:a==null?void 0:a.icon}),role:"img",children:d}),[f,o,u,h,a]);return e.jsxs(s,{...x(),children:[o&&e.jsx(l,{...m(),alt:n}),v]})});oe.displayName="NextUI.Avatar";var Qe=oe;const Xe=async(r,t)=>{try{return(await w.get(`/api/v1/follows/${r}/followers/`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(s){throw new Error(`Error listing user followers: ${s}`)}},qe=async(r,t)=>{try{return(await w.get(`/api/v1/follows/${r}/following/`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(s){throw new Error(`Error listing user followings: ${s}`)}},We=async(r,t,s)=>{try{await w.delete(`/api/v1/follows/${r}/unfollow/${t}/`,{headers:{Authorization:`Bearer ${s}`}})}catch(l){throw new Error(`Error deleting follow relation: ${l}`)}},Q=async(r,t,s)=>{try{return(await w.post("/api/v1/follows/",{follower:r,followed:t},{headers:{Authorization:`Bearer ${s}`}})).data}catch(l){throw new Error(`Error creating follow relation: ${l}`)}},er=async(r,t)=>{try{return(await w.get(`api/v1/follows/notFollowing/${r}/`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(s){throw new Error(`Error listing users not followed: ${s}`)}},rr=({user:r,children:t})=>{const{username:s,profilePhoto:l,experience:o}=r;return e.jsxs("div",{className:"flex items-center justify-between border-b-2 p-4",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(Qe,{src:l,name:s??"",showFallback:!0,size:"md"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold",children:s}),e.jsx("p",{className:"text-sm text-gray-500",children:o+" "+U("TotalXp")})]})]}),t??e.jsx(Ce,{className:"text-gray-500"})]})},ne=({users:r,children:t})=>{const[s,l]=c.useState(r);return c.useEffect(()=>{l(r)},[r]),e.jsx("div",{children:s==null?void 0:s.map(o=>e.jsx(M,{to:U("/profile")+"/"+o.username,children:e.jsx(rr,{user:o,children:t},o.id)},o.id))})},X=({type:r,follows:t})=>{const{isOpen:s,onOpen:l,onOpenChange:o}=ee();let d=null,n=null;r==="followers"&&(d=t.map(i=>i.follower),n=e.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-700",children:U("profile.follow")})),r==="following"&&(d=t.map(i=>i.followed));const a=r.charAt(0).toUpperCase()+r.slice(1);return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{onClick:l,className:"text-sm text-gray-500 hover:text-gray-700",...t.length===0&&{disabled:!0},children:[t.length," ",U("profile."+a)]}),e.jsx(re,{isOpen:s,onOpenChange:o,scrollBehavior:"inside",children:e.jsx(se,{children:e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"flex flex-col gap-1",children:a}),e.jsx(ae,{children:e.jsx(ne,{users:d??[],children:n})})]})})})]})},sr=({user:r})=>{var B;const{isOpen:t,onOpen:s,onOpenChange:l}=ee(),o=r.profilePhoto,{t:d}=$(),[n,a]=c.useState([]),[i,h]=c.useState([]),[f,u]=c.useState(!1),[p,x]=c.useState(!1),[m,v]=c.useState([]),j=k(),y=JSON.parse(j[_]);c.useEffect(()=>{Xe(r.id,j[b]).then(g=>{a(g),g.some(N=>N.follower.username===y.username)&&u(!0)}).catch(g=>{console.log(g)})},[]),c.useEffect(()=>{qe(r.id,j[b]).then(g=>{h(g),g.some(N=>N.followed.username===y.username)&&x(!0)}).catch(g=>{console.log(g)})},[]),c.useEffect(()=>{er(r.id,j[b]).then(g=>{v(g)}).catch(g=>{console.log(g)})},[]);const P=g=>{Q(y.id,g.id,j[b]).then(()=>{v(m.filter(N=>N.id!==g.id))})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"w-full overflow-hidden",children:[e.jsx("div",{className:"mx-20 flex w-40 items-center",children:e.jsx("img",{src:o??"/user.png",alt:"avatar",className:"rounded-full border border-gray-500 shadow-sm"})}),e.jsx("h1",{className:"text-center text-2xl font-bold",children:(B=r.username)==null?void 0:B.toUpperCase()}),e.jsx("h2",{children:(r.firstName??"")+" "+(r.lastName??"")}),e.jsxs("div",{children:[e.jsx("h3",{className:"px-1.5 text-center text-sm text-gray-700",children:d("profile.Since")+" "+Ee(r.dateJoined??"")}),e.jsx("h4",{children:y.username!==r.username?d(p?"profile.FollowsYou":"profile.DoesNotFollowYou"):null})]}),e.jsxs("div",{className:"flex justify-around p-5",children:[e.jsx(X,{type:"followers",follows:n}),e.jsx(X,{type:"following",follows:i})]})]})}),e.jsx("div",{className:"flex justify-around py-8",children:y.username==r.username?e.jsx(S,{className:"rounded-lg font-bold text-lg",bgColor:"secondaryYellow-500",onClick:s,children:d("profile.AddFriends")}):f?e.jsx(S,{className:"rounded-lg font-bold text-lg",bgColor:"primaryPink-500",onClick:()=>We(y.id,r.id,j[b]),children:d("profile.Unfollow")}):e.jsx(S,{className:"rounded-lg font-bold text-lg",bgColor:"primaryBlue-500",onClick:()=>Q(y.id,r.id,j[b]),children:d("profile.Follow")})})]}),e.jsx(re,{isOpen:t,onOpenChange:l,scrollBehavior:"inside",children:e.jsx(se,{children:e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"flex flex-col gap-1",children:d("profile.NotFollowing")}),e.jsx(ae,{children:e.jsx(ne,{users:m,children:e.jsx(S,{className:"rounded-lg font-bold text-lg",bgColor:"primaryBlue-500",onClick:g=>{g.preventDefault(),P(r)},children:e.jsx($e,{className:"w-6 h-6"})})})})]})})})]})},tr=async(r,t)=>{try{return(await w.get(`/api/v1/user/${t}/`,{headers:{Authorization:`Bearer ${r}`}})).data}catch(s){throw new Error(`Error retrieving user: ${s}`)}};function ar(r){return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-full ",children:e.jsx("div",{className:"flex h-4  overflow-hidden rounded-xl bg-gray-200 text-xs",children:e.jsx("div",{style:{width:`${r.progressValue/r.progressMax*100}%`},className:`text-white bg-${r.progressColor}-100 whitespace-nowrap rounded-xl shadow-none`,children:e.jsx("div",{className:" flex h-2 justify-center overflow-hidden rounded-xl pt-1 text-xs",children:e.jsx("div",{className:` flex w-9/12 flex-col justify-center whitespace-nowrap rounded-xl bg-${r.progressColor}-50 text-center text-white shadow-none`})})})})}),e.jsx("div",{className:"flex flex-row justify-between pl-4",children:e.jsxs("p",{className:"text-xs font-bold text-gray-400",children:[r.progressValue,"/",r.progressMax]})})]})}function q(r){const{t}=$();return r.badge.badgeColor="tiviElectricPurple",e.jsxs("article",{className:"flex items-center border-b-2 p-6",children:[e.jsx("div",{style:{filter:`drop-shadow(2px 4px 2px #9c9696) grayscale(${r.grayscale?"100%":"0%"}`},children:e.jsxs("div",{className:`items-center justify-center bg-${r.badge.badgeColor}-100 group m-2 h-24 w-24 overflow-hidden rounded-lg p-2`,style:{clipPath:"polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%)"},children:[e.jsx("div",{className:"relative left-5 h-10 w-10 pt-2 group-hover:h-12 group-hover:w-12 group-hover:-translate-x-1 group-hover:-translate-y-1",children:e.jsx("img",{src:r.badge.badgeImage,alt:r.badge.badgeName})}),e.jsx("p",{className:"pt-3 text-center text-xs font-extrabold text-gray-700 group-hover:-translate-y-2",children:t("badge.Level")+" "+r.badge.badgeLevel})]})}),e.jsxs("div",{className:"flex w-full flex-col justify-center gap-3 px-5",children:[e.jsx("p",{className:"text-lg font-bold text-gray-700",children:r.badge.badgeName.toUpperCase()}),e.jsx("p",{className:"text-sm text-gray-500",children:r.badge.badgeDescription}),e.jsx(ar,{progressValue:r.progress,progressMax:r.badge.badgeGoal,progressColor:"tiviElectricPurple"})]})]})}const or=async r=>{try{return(await w.get("/api/v1/badges/",{headers:{Authorization:`Bearer ${r}`}})).data}catch(t){throw new Error(`Error fetching badges: ${t}`)}},nr=async(r,t)=>{try{return(await w.get(`/api/v1/user/${r}/badges/`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(s){throw new Error(`Error listing user badges: ${s}`)}};function lr(r){const t=k(),[s,l]=c.useState([]),[o,d]=c.useState([]),{t:n}=$();return c.useEffect(()=>{nr(r.user.id,t[b]).then(a=>{l(a)}).catch(a=>{console.log(a)}),s.length<3&&or(t[b]).then(a=>{d(a)}).catch(a=>{console.log(a)})},[]),e.jsxs("section",{className:"w-full",children:[e.jsx("div",{className:"flex flex-row justify-between w-full px-12",children:e.jsx("p",{className:"text-lg font-bold w-full text-gray-700 px-2",children:n("badge.Title")})}),e.jsxs("div",{className:"m-4 flex flex-col flex-wrap justify-center rounded-lg border-2 border-b-0",children:[s.sort((a,i)=>i.badgeProgress/i.badge.badgeGoal-a.badgeProgress/a.badge.badgeGoal||i.badge.badgeLevel-a.badge.badgeLevel).slice(0,3).map(a=>e.jsx(q,{badge:a.badge,progress:a.badgeProgress},a.badge.id)),s.length<3&&o.filter(a=>!s.some(i=>i.badge.id===a.id)).sort((a,i)=>i.badgeLevel-a.badgeLevel).slice(0,3-s.length).map(a=>e.jsx(q,{badge:a,progress:0,grayscale:!0},a.id))," "]})]})}function dr(r){const[t,s]=c.useState(r.rating),[l,o]=c.useState(0),{t:d}=$(),n=a=>{s(a),r.handleRating(a)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col items-center gap-2",children:e.jsx("span",{className:"flex items-center gap-4 rounded text-xs text-slate-500",children:e.jsx("span",{className:"flex gap-1 text-amber-400",role:"img","aria-label":d("rating.AverageRating"),children:Array(5).fill("").map((a,i)=>e.jsx("button",{type:"button",role:"button",name:"puntuación media",className:"focus:outline-none",onClick:()=>n(i+1),onMouseEnter:()=>o(i+1),onMouseLeave:()=>o(0),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:i+1<=(l||t)?"currentColor":"none",stroke:"currentColor",className:"h-3.5 w-3.5",children:e.jsx("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z",clipRule:"evenodd"})})},i))})})})})}const ir=async(r,t,s)=>{let l=s;if(!l){const o=k();l=JSON.parse(o[_]).id}try{return(await w.get(`/api/v1/ratings/user/${l}/note/${r}/`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(o){throw new Error(`Error retrieving user note rating: ${o}`)}},cr=async(r,t)=>{try{return(await w.post("/api/v1/ratings/note/",r,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/x-www-form-urlencoded"}})).data}catch(s){throw new Error(`Error creating user note rating: ${s}`)}},ur=async(r,t,s,l)=>{let o=l;if(!o){const d=k();o=JSON.parse(d[_]).id}try{return(await w.patch(`/api/v1/ratings/user/${o}/note/${r}/`,t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/x-www-form-urlencoded"}})).data}catch(d){throw new Error(`Error updating user note rating: ${d}`)}};function gr(r){var i,h,f,u,p;const{t}=$(),s=Math.round(r.post.noteAverageRating??0),[l,o]=c.useState(),[d,n]=c.useState(!1),a=k();return c.useEffect(()=>{ir(r.post.id??-1,a[b]).then(x=>{o(x.rating)}).catch(()=>{cr({note:r.post.id??-1,rating:l??0},a[b])})},[]),c.useEffect(()=>{d&&(ur(r.post.id??-1,{note:r.post.id??-1,rating:l??0},a[b]),n(!1))},[l]),e.jsxs("div",{className:"my-4 flex w-full max-w-3xl flex-col rounded-md border bg-white shadow-md",children:[e.jsxs("div",{className:"flex flex-row justify-between px-5 py-2",children:[e.jsxs("div",{className:"flex w-full flex-col items-start gap-1",children:[e.jsxs("div",{className:"flex w-full justify-between pr-8",children:[e.jsx("p",{className:"text-lg font-bold text-gray-700",children:r.post.noteName}),e.jsx("p",{className:"text-xs text-gray-400",children:new Date(r.post.noteLastModified??"2021-01-01").toLocaleDateString()})]}),e.jsx(dr,{rating:l??s,handleRating:x=>{n(!0),o(x)}})]}),e.jsx(M,{to:t("/profile")+"/"+((i=r.post.user)==null?void 0:i.username),className:" flex w-16 items-center",children:e.jsx("img",{src:((h=r.post.user)==null?void 0:h.profilePhoto)??"/user.png",alt:((f=r.post.user)==null?void 0:f.username)??"user",className:"rounded-full border border-gray-500 shadow-sm"})})]}),e.jsx("div",{className:"flex flex-col px-5 py-2",children:((u=r.post.noteContent)==null?void 0:u.length)??0>500?e.jsxs("p",{className:"text-sm text-gray-500",children:[((p=r.post.noteContent)==null?void 0:p.substring(0,500))+"...",e.jsx(M,{to:"",className:"rounded-b-lg p-4 text-center font-semibold text-gray-600 hover:text-tiviElectricPurple-100",children:t("profile.SeeMore")})]}):e.jsx("p",{className:"text-sm text-gray-500",children:r.post.noteContent})})]})}function fr(r){return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"flex flex-row justify-between px-5",children:e.jsx("p",{className:"text-lg font-bold text-gray-700",children:"Posts"})}),e.jsx("div",{className:"flex w-full flex-col items-center px-8",children:r.posts.map(t=>e.jsx(gr,{post:t},t.id))})]})}const xr=c.lazy(()=>ke(()=>import("./index-b43e24a8.js").then(r=>r.af),["assets/index-b43e24a8.js","assets/index-53c233c2.css"])),wr=()=>{const{t:r}=$(),{username:t}=Be(),[s,l]=c.useState(null),[o,d]=c.useState(!1),n=k(),a=JSON.parse(n[_]).username,[i,h]=c.useState([]),{logout:f}=c.useContext(Fe);return c.useEffect(()=>{Ie(n[b]).then(u=>{h(u)}).catch(u=>{H.error(r(u.message))})},[]),c.useEffect(()=>{d(!0),tr(n[b],t??a).then(u=>{l(u),d(!1)}).catch(u=>{H.error(r(u.message)),d(!1)})},[t]),o?e.jsx(Pe,{}):s?e.jsxs("div",{className:"overflow-x-hidden",children:[e.jsx(Ae,{children:e.jsx("div",{className:"h-fill flex items-center",children:e.jsx("button",{onClick:f,className:`mx-16
                        + text-3xl font-bold`,children:e.jsx(Se,{})})})}),e.jsxs("div",{className:"flex flex-row-reverse items-center p-8",children:[e.jsx(sr,{user:s}),e.jsx(lr,{user:s})]}),e.jsx(fr,{posts:i})]}):e.jsx(xr,{})};export{wr as default};
